<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Login / Register — Form chuyển đổi</title>
  <style>
    :root{
      --bg:#0f1724; /* dark navy */
      --card:#0b1220;
      --muted:#9aa9bf;
      --accent:#7c3aed;
      --glass: rgba(255,255,255,0.04);
      --success:#16a34a;
      --danger:#ef4444;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;min-height:100vh;background:linear-gradient(180deg,#071026 0%, #081428 50%, #071025 100%);color:#e6eef8;display:flex;align-items:center;justify-content:center;padding:32px}

    .wrap{width:100%;max-width:920px;display:grid;grid-template-columns:420px 1fr;gap:28px}

    /* left card */
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;padding:28px;box-shadow: 0 8px 30px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.04)}
    header h1{margin:0;font-size:20px}
    header p{margin:6px 0 0;color:var(--muted);font-size:13px}

    /* toggle tabs */
    .tabs{display:flex;background:var(--glass);padding:6px;border-radius:10px;margin-top:20px}
    .tab{flex:1;text-align:center;padding:10px 12px;border-radius:8px;cursor:pointer;font-weight:600;color:var(--muted);user-select:none}
    .tab.active{background:linear-gradient(90deg,var(--accent), #5b21b6);color:white;box-shadow:0 6px 18px rgba(124,58,237,0.18)}

    form{margin-top:18px}
    .field{margin-bottom:12px}
    label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
    input[type="text"],input[type="email"],input[type="password"]{width:100%;padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit;font-size:14px}
    .actions{display:flex;align-items:center;justify-content:space-between;margin-top:12px}
    .btn{padding:10px 14px;border-radius:10px;border:0;background:var(--accent);color:white;font-weight:700;cursor:pointer}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06)}
    .small{font-size:13px;color:var(--muted)}

    .right{display:flex;align-items:center;justify-content:center}
    .illustration{width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:24px}
    .card-plain{background:transparent;border-radius:12px;padding:18px;border:1px dashed rgba(255,255,255,0.03);text-align:center}

    .hint{font-size:13px;color:var(--muted);margin-top:10px}
    .error{color:var(--danger);font-size:13px;margin-top:6px}
    .success{color:var(--success);font-size:13px;margin-top:6px}

    .pw-row{display:flex;gap:10px}
    .pw-row input{flex:1}
    .pw-toggle{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:10px;border-radius:8px;cursor:pointer}

    @media (max-width:880px){
      .wrap{grid-template-columns:1fr;max-width:420px}
      .right{order:-1}
    }
  </style>
</head>
<body>
  <main class="wrap">
    <section class="card" aria-labelledby="auth-title">
      <header>
        <h1 id="auth-title">Đăng nhập / Đăng ký</h1>
        <p>Đăng nhập/đăng ký.</p>
      </header>

      <nav class="tabs" role="tablist" aria-label="Auth tabs">
        <div class="tab active" data-target="login" role="tab" aria-selected="true" tabindex="0">Đăng nhập</div>
        <div class="tab" data-target="register" role="tab" aria-selected="false" tabindex="0">Đăng ký</div>
      </nav>

      <div id="forms">
        <!-- LOGIN -->
        <form id="login" class="active" novalidate>
          <div class="field">
            <label for="li-email">Email</label>
            <input id="li-email" name="email" type="email" required autocomplete="username" />
          </div>

          <div class="field">
            <label for="li-password">Mật khẩu</label>
            <div class="pw-row">
              <input id="li-password" name="password" type="password" required autocomplete="current-password" />
              <button type="button" class="pw-toggle" data-target="#li-password" aria-label="Hiện/ẩn mật khẩu">👁</button>
            </div>
          </div>

          <div class="actions">
            <label class="small"><input type="checkbox" id="remember" /> Ghi nhớ</label>
            <button class="btn" type="submit">Đăng nhập</button>
          </div>

          <p id="login-msg" class="hint" role="status" aria-live="polite"></p>
        </form>

        <!-- REGISTER -->
        <form id="register" style="display:none" novalidate>
          <div class="field">
            <label for="rg-name">Họ và tên</label>
            <input id="rg-name" name="fullname" type="text" required autocomplete="name" />
          </div>

          <div class="field">
            <label for="rg-email">Email</label>
            <input id="rg-email" name="email" type="email" required autocomplete="email" />
          </div>

          <div class="field">
            <label for="rg-password">Mật khẩu</label>
            <div class="pw-row">
              <input id="rg-password" name="password" type="password" required autocomplete="new-password" />
              <button type="button" class="pw-toggle" data-target="#rg-password" aria-label="Hiện/ẩn mật khẩu">👁</button>
            </div>
            <p class="small hint">Ít nhất 8 ký tự bao gồm chữ và số.</p>
          </div>

          <div class="actions">
            <button class="btn" type="submit">Tạo tài khoản</button>
            <button type="button" class="btn ghost" id="to-login">Quay lại</button>
          </div>

          <p id="register-msg" class="hint" role="status" aria-live="polite"></p>
        </form>
      </div>
    </section>

    
  </main>

  <script>
    // Basic tab switching and client-side validation + example fetch calls.
    (function(){
      const tabs = document.querySelectorAll('.tab');
      const loginForm = document.getElementById('login');
      const regForm = document.getElementById('register');
      const loginMsg = document.getElementById('login-msg');
      const regMsg = document.getElementById('register-msg');

      function setActive(target){
        tabs.forEach(t=>{
          const tg=t.getAttribute('data-target');
          const active = tg===target;
          t.classList.toggle('active', active);
          t.setAttribute('aria-selected', active? 'true':'false');
        });
        if(target==='login'){
          loginForm.style.display='block'; regForm.style.display='none';
        }else{
          loginForm.style.display='none'; regForm.style.display='block';
        }
      }

      tabs.forEach(t=> t.addEventListener('click', ()=> setActive(t.dataset.target)));
      // keyboard support
      tabs.forEach(t=> t.addEventListener('keydown', e=>{ if(e.key==='Enter' || e.key===' ') setActive(t.dataset.target); }));

      document.getElementById('to-login').addEventListener('click', ()=> setActive('login'));

      // password visibility toggles
      document.querySelectorAll('.pw-toggle').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const input = document.querySelector(btn.dataset.target);
          if(!input) return;
          input.type = input.type === 'password' ? 'text' : 'password';
          btn.textContent = input.type === 'password' ? '👁' : '🙈';
        });
      });

      // Helper: show messages
      function show(el,msg,ok=true){ el.textContent=msg; el.className = ok? 'success':'error'; setTimeout(()=>{ if(el) el.textContent=''; }, 6000); }

      // LOGIN submit
      loginForm.addEventListener('submit', async (e)=>{
        e.preventDefault();
        const email = document.getElementById('li-email').value.trim();
        const password = document.getElementById('li-password').value;
        if(!email || !password){ show(loginMsg,'Vui lòng điền email và mật khẩu', false); return; }

        // Example fetch - adapt endpoint and response handling to your backend
        try{
          const res = await fetch('/api/login', {
            method:'POST', headers:{'Content-Type':'application/json'},
            body: JSON.stringify({ email, password })
          });
          if(!res.ok){
            const err = await res.json().catch(()=>({message:'Lỗi'}));
            show(loginMsg, err.message || 'Đăng nhập thất bại', false);
            return;
          }
          const data = await res.json();
          show(loginMsg, 'Đăng nhập thành công. Chuyển trang...', true);
          // store token if provided
          if(data.token) localStorage.setItem('token', data.token);
          // redirect example
          setTimeout(()=> window.location.href = data.redirect || '/dashboard', 700);
        }catch(err){ show(loginMsg, 'Không thể kết nối tới server', false); }
      });

      // REGISTER submit
      regForm.addEventListener('submit', async (e)=>{
        e.preventDefault();
        const fullname = document.getElementById('rg-name').value.trim();
        const email = document.getElementById('rg-email').value.trim();
        const password = document.getElementById('rg-password').value;
        if(!fullname || !email || !password){ show(regMsg,'Vui lòng điền đầy đủ thông tin', false); return; }
        if(password.length < 8){ show(regMsg,'Mật khẩu phải có ít nhất 8 ký tự', false); return; }

        try{
          const res = await fetch('/api/register', {
            method:'POST', headers:{'Content-Type':'application/json'},
            body: JSON.stringify({ name:fullname, email, password })
          });
          if(!res.ok){ const err = await res.json().catch(()=>({message:'Lỗi'})); show(regMsg, err.message || 'Đăng ký thất bại', false); return; }
          const data = await res.json();
          show(regMsg, 'Đăng ký thành công. Vui lòng đăng nhập.', true);
          // switch to login tab after success
          setTimeout(()=> setActive('login'), 900);
        }catch(err){ show(regMsg, 'Không thể kết nối tới server', false); }
      });

    })();
  </script>
</body>
</html>